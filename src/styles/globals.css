@tailwind base;
@tailwind components;
@tailwind utilities;

/* LIGHT THEME */
:root {
  --color-brand:   79 70 229;
  --color-brand-l: 99 102 241;
  --color-bg:      250 250 249;
  --color-surface: 255 255 255;
  --color-surface2:246 246 244;
  --color-hover:   243 244 246;
  --color-border:  229 231 235;
  --color-border2: 209 213 219;
  --color-text:    17 24 39;
  --color-text2:   107 114 128;
  --color-text3:   156 163 175;
  --color-green:   34 197 94;
  --color-yellow:  234 179 8;
  --color-red:     239 68 68;
  --color-blue:    59 130 246;
  --color-purple:  147 51 234;
  --color-orange:  249 115 22;
  --font-sans:  'Inter', system-ui, -apple-system, sans-serif;
  --font-serif: 'Lora', Georgia, serif;
  --font-mono:  'JetBrains Mono', 'Fira Code', monospace;
  --radius-sm:  6px;
  --radius-md:  10px;
  --radius-lg:  14px;
  --radius-xl:  20px;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.07), 0 2px 4px -2px rgb(0 0 0 / 0.04);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.08), 0 4px 6px -4px rgb(0 0 0 / 0.04);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.1), 0 8px 10px -6px rgb(0 0 0 / 0.04);
}

/* DARK THEME */
.dark {
  --color-brand:   129 140 248;
  --color-brand-l: 165 180 252;
  --color-bg:       15 15 20;
  --color-surface:  24 24 32;
  --color-surface2: 30 30 40;
  --color-hover:    35 35 48;
  --color-border:   44 44 60;
  --color-border2:  58 58 78;
  --color-text:    237 237 245;
  --color-text2:   148 148 170;
  --color-text3:   100 100 130;
  --color-green:   74 222 128;
  --color-yellow:  250 204 21;
  --color-red:     248 113 113;
  --color-blue:    96 165 250;
  --color-purple:  192 132 252;
  --color-orange:  251 146 60;
  --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.4);
  --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.5), 0 2px 4px -2px rgb(0 0 0 / 0.4);
  --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.6), 0 4px 6px -4px rgb(0 0 0 / 0.4);
  --shadow-xl: 0 20px 25px -5px rgb(0 0 0 / 0.7), 0 8px 10px -6px rgb(0 0 0 / 0.5);
}

/* COLOR VARIANTS */
[data-theme="warm"] {
  --color-brand:   180 83 9;
  --color-brand-l: 217 119 6;
  --color-bg:      255 251 245;
  --color-border:  231 219 204;
}
[data-theme="green"] {
  --color-brand:   22 163 74;
  --color-brand-l: 34 197 94;
  --color-bg:      246 252 248;
  --color-border:  209 231 215;
}
[data-theme="rose"] {
  --color-brand:   225 29 72;
  --color-brand-l: 244 63 94;
  --color-bg:      255 247 248;
  --color-border:  251 207 213;
}

/* BASE */
*, *::before, *::after { box-sizing: border-box; }

html {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
  height: -webkit-fill-available;
}

body {
  font-family: var(--font-sans);
  background-color: rgb(var(--color-bg));
  color: rgb(var(--color-text));
  min-height: 100vh;
  min-height: -webkit-fill-available;
  transition: background-color 0.2s ease, color 0.2s ease;
  word-break: break-word;
  overflow-wrap: break-word;
}

body.font-serif-body { font-family: var(--font-serif) !important; }

/* SCROLLBAR */
* { scrollbar-width: thin; scrollbar-color: rgb(var(--color-border2)) transparent; }
::-webkit-scrollbar { width: 4px; height: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: rgb(var(--color-border2)); border-radius: 99px; }
::-webkit-scrollbar-thumb:hover { background: rgb(var(--color-text3)); }

/* FOCUS */
:focus-visible {
  outline: 2px solid rgb(var(--color-brand));
  outline-offset: 2px;
  border-radius: 4px;
}

/* SELECTION */
::selection {
  background: rgb(var(--color-brand) / 0.15);
  color: rgb(var(--color-text));
}

/* DRAG */
.is-dragging { opacity: 0.4; }
[data-drag-handle] { cursor: grab; }
[data-drag-handle]:active { cursor: grabbing; }

/* PROSE */
.prose-journal {
  font-family: var(--font-serif);
  font-size: 15px;
  line-height: 1.75;
  color: rgb(var(--color-text));
  word-break: break-word;
  overflow-wrap: break-word;
}

/* ANIMATIONS */
@keyframes fadeIn  { from { opacity: 0 } to { opacity: 1 } }
@keyframes slideUp { from { opacity: 0; transform: translateY(10px) } to { opacity: 1; transform: translateY(0) } }
@keyframes scaleIn { from { opacity: 0; transform: scale(0.97) } to { opacity: 1; transform: scale(1) } }
@keyframes spin    { to { transform: rotate(360deg) } }
@keyframes shimmer {
  0%   { background-position: -1000px 0 }
  100% { background-position:  1000px 0 }
}

.animate-fadeIn  { animation: fadeIn  0.18s ease-out both; }
.animate-slideUp { animation: slideUp 0.22s ease-out both; }
.animate-scaleIn { animation: scaleIn 0.18s ease-out both; }

.stagger > *:nth-child(1) { animation: slideUp 0.22s ease-out 0ms   both; }
.stagger > *:nth-child(2) { animation: slideUp 0.22s ease-out 30ms  both; }
.stagger > *:nth-child(3) { animation: slideUp 0.22s ease-out 60ms  both; }
.stagger > *:nth-child(4) { animation: slideUp 0.22s ease-out 90ms  both; }
.stagger > *:nth-child(5) { animation: slideUp 0.22s ease-out 120ms both; }
.stagger > *:nth-child(6) { animation: slideUp 0.22s ease-out 150ms both; }
.stagger > *:nth-child(7) { animation: slideUp 0.22s ease-out 180ms both; }
.stagger > *:nth-child(8) { animation: slideUp 0.22s ease-out 210ms both; }

/* SKELETON */
.skeleton {
  background: linear-gradient(
    90deg,
    rgb(var(--color-border)) 25%,
    rgb(var(--color-hover))  50%,
    rgb(var(--color-border)) 75%
  );
  background-size: 1000px 100%;
  animation: shimmer 1.8s infinite linear;
  border-radius: var(--radius-sm);
}

/* CARD */
.brain-card {
  transition: box-shadow 0.15s ease, transform 0.15s ease;
  overflow: hidden;
  min-width: 0;
}
.brain-card:hover {
  box-shadow: var(--shadow-md);
  transform: translateY(-1px);
}

/* TAG CHIP */
.tag-chip {
  display: inline-flex;
  align-items: center;
  padding: 1px 7px;
  border-radius: 99px;
  font-size: 11px;
  font-weight: 500;
  background: rgb(var(--color-brand) / 0.08);
  color: rgb(var(--color-brand));
  border: 1px solid rgb(var(--color-brand) / 0.15);
  white-space: nowrap;
  cursor: pointer;
  transition: background 0.1s, color 0.1s;
  user-select: none;
  max-width: 110px;
  overflow: hidden;
  text-overflow: ellipsis;
}
.tag-chip:hover, .tag-chip.active {
  background: rgb(var(--color-brand));
  color: white;
  border-color: transparent;
}

/* FORM */
textarea, input, select { font-family: inherit; }
select { -webkit-appearance: none; appearance: none; }

/* MODAL */
.modal-backdrop {
  backdrop-filter: blur(6px);
  -webkit-backdrop-filter: blur(6px);
}

/* LINE CLAMP */
.line-clamp-1 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 1; -webkit-box-orient: vertical; }
.line-clamp-2 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; }
.line-clamp-3 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; }
.line-clamp-4 { overflow: hidden; display: -webkit-box; -webkit-line-clamp: 4; -webkit-box-orient: vertical; }

/* MOBILE SAFE AREAS */
@supports (padding: max(0px)) {
  .safe-bottom { padding-bottom: max(16px, env(safe-area-inset-bottom)); }
}
